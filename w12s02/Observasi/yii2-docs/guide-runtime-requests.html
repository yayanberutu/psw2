<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/963b888/css/bootstrap.css" rel="stylesheet">
<link href="./assets/e1ef68af/solarized_light.css" rel="stylesheet">
<link href="./assets/407eef69/style.css" rel="stylesheet">
<script src="./assets/5b23384c/jquery.js"></script>
<script src="./assets/963b888/js/bootstrap.js"></script>
<script src="./assets/538e96fb/jssearch.js"></script>    <title>Requests - Handling Requests - The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w1061" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w1061-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">The Definitive Guide to Yii 2.0</a></div><div id="w1061-collapse" class="collapse navbar-collapse"><ul id="w1062" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Extensions <span class="caret"></span></a><ul id="w1063" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-authclient-index.html" tabindex="-1">authclient</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-elasticsearch-index.html" tabindex="-1">elasticsearch</a></li>
<li><a href="./ext-faker-index.html" tabindex="-1">faker</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-httpclient-index.html" tabindex="-1">httpclient</a></li>
<li><a href="./ext-imagine-index.html" tabindex="-1">imagine</a></li>
<li><a href="./ext-jui-index.html" tabindex="-1">jui</a></li>
<li><a href="./ext-mongodb-index.html" tabindex="-1">mongodb</a></li>
<li><a href="./ext-redis-index.html" tabindex="-1">redis</a></li>
<li><a href="./ext-shell-index.html" tabindex="-1">shell</a></li>
<li><a href="./ext-smarty-index.html" tabindex="-1">smarty</a></li>
<li><a href="./ext-sphinx-index.html" tabindex="-1">sphinx</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li>
<li><a href="./ext-twig-index.html" tabindex="-1">twig</a></li></ul></li>
<li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-1045" data-toggle="collapse" data-parent="#navigation">Introduction <b class="caret"></b></a><div id="navigation-1045" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">About Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Upgrading from Version 1.1</a></div>
<a class="list-group-item" href="#navigation-1046" data-toggle="collapse" data-parent="#navigation">Getting Started <b class="caret"></b></a><div id="navigation-1046" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-prerequisites.html">What do you need to know</a>
<a class="list-group-item" href="./guide-start-installation.html">Installing Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Running Applications</a>
<a class="list-group-item" href="./guide-start-hello.html">Saying Hello</a>
<a class="list-group-item" href="./guide-start-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-start-databases.html">Working with Databases</a>
<a class="list-group-item" href="./guide-start-gii.html">Generating Code with Gii</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Looking Ahead</a></div>
<a class="list-group-item" href="#navigation-1047" data-toggle="collapse" data-parent="#navigation">Application Structure <b class="caret"></b></a><div id="navigation-1047" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">Application Structure Overview</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Entry Scripts</a>
<a class="list-group-item" href="./guide-structure-applications.html">Applications</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Application Components</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-structure-models.html">Models</a>
<a class="list-group-item" href="./guide-structure-views.html">Views</a>
<a class="list-group-item" href="./guide-structure-modules.html">Modules</a>
<a class="list-group-item" href="./guide-structure-filters.html">Filters</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-structure-assets.html">Assets</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Extensions</a></div>
<a class="list-group-item active" href="#navigation-1048" data-toggle="collapse" data-parent="#navigation">Handling Requests <b class="caret"></b></a><div id="navigation-1048" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-runtime-overview.html">Request Handling Overview</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Routing and URL Creation</a>
<a class="list-group-item active" href="./guide-runtime-requests.html">Requests</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Responses</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sessions and Cookies</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Handling Errors</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Logging</a></div>
<a class="list-group-item" href="#navigation-1049" data-toggle="collapse" data-parent="#navigation">Key Concepts <b class="caret"></b></a><div id="navigation-1049" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">Components</a>
<a class="list-group-item" href="./guide-concept-properties.html">Properties</a>
<a class="list-group-item" href="./guide-concept-events.html">Events</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Behaviors</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Configurations</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Aliases</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Class Autoloading</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a></div>
<a class="list-group-item" href="#navigation-1050" data-toggle="collapse" data-parent="#navigation">Working with Databases <b class="caret"></b></a><div id="navigation-1050" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Database Access Objects</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Query Builder</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Migrations</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-sphinx/doc/guide">Sphinx</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-redis/doc/guide">Redis</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-mongodb/doc/guide">MongoDB</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-elasticsearch/doc/guide">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-1051" data-toggle="collapse" data-parent="#navigation">Getting Data from Users <b class="caret"></b></a><div id="navigation-1051" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Creating Forms</a>
<a class="list-group-item" href="./guide-input-validation.html">Validating Input</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Uploading Files</a>
<a class="list-group-item" href="./guide-input-tabular-input.html">Collecting Tabular Input</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Getting Data for Multiple Models</a>
<a class="list-group-item" href="./guide-input-form-javascript.html">Extending ActiveForm on the Client Side</a></div>
<a class="list-group-item" href="#navigation-1052" data-toggle="collapse" data-parent="#navigation">Displaying Data <b class="caret"></b></a><div id="navigation-1052" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatting.html">Data Formatting</a>
<a class="list-group-item" href="./guide-output-pagination.html">Pagination</a>
<a class="list-group-item" href="./guide-output-sorting.html">Sorting</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Data Providers</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Data Widgets</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Working with Client Scripts</a>
<a class="list-group-item" href="./guide-output-theming.html">Theming</a></div>
<a class="list-group-item" href="#navigation-1053" data-toggle="collapse" data-parent="#navigation">Security <b class="caret"></b></a><div id="navigation-1053" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-overview.html">Security Overview</a>
<a class="list-group-item" href="./guide-security-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-security-authorization.html">Authorization</a>
<a class="list-group-item" href="./guide-security-passwords.html">Working with Passwords</a>
<a class="list-group-item" href="./guide-security-cryptography.html">Cryptography</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-authclient/doc/guide">Auth Clients</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Best Practices</a></div>
<a class="list-group-item" href="#navigation-1054" data-toggle="collapse" data-parent="#navigation">Caching <b class="caret"></b></a><div id="navigation-1054" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Caching Overview</a>
<a class="list-group-item" href="./guide-caching-data.html">Data Caching</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Fragment Caching</a>
<a class="list-group-item" href="./guide-caching-page.html">Page Caching</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP Caching</a></div>
<a class="list-group-item" href="#navigation-1055" data-toggle="collapse" data-parent="#navigation">RESTful Web Services <b class="caret"></b></a><div id="navigation-1055" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Quick Start</a>
<a class="list-group-item" href="./guide-rest-resources.html">Resources</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-rest-routing.html">Routing</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Response Formatting</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Rate Limiting</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Versioning</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Error Handling</a></div>
<a class="list-group-item" href="#navigation-1056" data-toggle="collapse" data-parent="#navigation">Development Tools <b class="caret"></b></a><div id="navigation-1056" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-debug/doc/guide">Debug Toolbar and Debugger</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-gii/doc/guide">Generating Code using Gii</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-apidoc">Generating API Documentation</a></div>
<a class="list-group-item" href="#navigation-1057" data-toggle="collapse" data-parent="#navigation">Testing <b class="caret"></b></a><div id="navigation-1057" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Testing Overview</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Testing environment setup</a>
<a class="list-group-item" href="./guide-test-unit.html">Unit Tests</a>
<a class="list-group-item" href="./guide-test-functional.html">Functional Tests</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Acceptance Tests</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a></div>
<a class="list-group-item" href="#navigation-1058" data-toggle="collapse" data-parent="#navigation">Special Topics <b class="caret"></b></a><div id="navigation-1058" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-app-advanced/doc/guide">Advanced Project Template</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Building Application from Scratch</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Console Commands</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Core Validators</a>
<a class="list-group-item" href="./guide-tutorial-docker.html">Docker</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Internationalization</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Mailing</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Performance Tuning</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Shared Hosting Environment</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Template Engines</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Working with Third-Party Code</a>
<a class="list-group-item" href="./guide-tutorial-yii-as-micro-framework.html">Using Yii as a micro framework</a></div>
<a class="list-group-item" href="#navigation-1059" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-1059" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-grid-gridview.html">GridView</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-listview.html">ListView</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-detailview.html">DetailView</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/guide-input-forms.html#activerecord-based-forms-activeform">ActiveForm</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-pjax.html">Pjax</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-menu.html">Menu</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-linkpager.html">LinkPager</a>
<a class="list-group-item" href="https://www.yiiframework.com/doc-2.0/yii-widgets-linksorter.html">LinkSorter</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-bootstrap/doc/guide">Bootstrap Widgets</a>
<a class="list-group-item" href="https://www.yiiframework.com/extension/yiisoft/yii2-jui/doc/guide">jQuery UI Widgets</a></div>
<a class="list-group-item" href="#navigation-1060" data-toggle="collapse" data-parent="#navigation">Helpers <b class="caret"></b></a><div id="navigation-1060" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Helpers Overview</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Requests <span id="requests"></span><a href="#requests" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#request-parameters">Request Parameters</a></li>
<li><a href="#request-methods">Request Methods</a></li>
<li><a href="#request-urls">Request URLs</a></li>
<li><a href="#http-headers">HTTP Headers</a></li>
<li><a href="#client-information">Client Information</a></li>
<li><a href="#trusted-proxies">Trusted proxies and headers</a></li></ol></div>
<p>Requests made to an application are represented in terms of <a href="./yii-web-request.html">yii\web\Request</a> objects which provide information
such as request parameters, HTTP headers, cookies, etc. For a given request, you can get access to the corresponding
request object via the <code>request</code> <a href="guide-structure-application-components.html">application component</a> which is an instance
of <a href="./yii-web-request.html">yii\web\Request</a>, by default. In this section, we will describe how you can make use of this component in your applications.</p>
<h2>Request Parameters  <span id="request-parameters"></span><a href="#request-parameters" class="hashlink">&para;</a></h2><p>To get request parameters, you can call <a href="./yii-web-request.html#get()-detail">get()</a> and <a href="./yii-web-request.html#post()-detail">post()</a> methods
of the <code>request</code> component. They return the values of <code>$_GET</code> and <code>$_POST</code>, respectively. For example,</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$request</span> = Yii::<span class="hljs-variable">$app</span>-&gt;request;

<span class="hljs-variable">$get</span> = <span class="hljs-variable">$request</span>-&gt;get();
<span class="hljs-comment">// equivalent to: $get = $_GET;</span>

<span class="hljs-variable">$id</span> = <span class="hljs-variable">$request</span>-&gt;get(<span class="hljs-string">'id'</span>);
<span class="hljs-comment">// equivalent to: $id = isset($_GET['id']) ? $_GET['id'] : null;</span>

<span class="hljs-variable">$id</span> = <span class="hljs-variable">$request</span>-&gt;get(<span class="hljs-string">'id'</span>, <span class="hljs-number">1</span>);
<span class="hljs-comment">// equivalent to: $id = isset($_GET['id']) ? $_GET['id'] : 1;</span>

<span class="hljs-variable">$post</span> = <span class="hljs-variable">$request</span>-&gt;post();
<span class="hljs-comment">// equivalent to: $post = $_POST;</span>

<span class="hljs-variable">$name</span> = <span class="hljs-variable">$request</span>-&gt;post(<span class="hljs-string">'name'</span>);
<span class="hljs-comment">// equivalent to: $name = isset($_POST['name']) ? $_POST['name'] : null;</span>

<span class="hljs-variable">$name</span> = <span class="hljs-variable">$request</span>-&gt;post(<span class="hljs-string">'name'</span>, <span class="hljs-string">''</span>);
<span class="hljs-comment">// equivalent to: $name = isset($_POST['name']) ? $_POST['name'] : '';</span>
</code></pre>
<blockquote class="info"><p><strong>Info: </strong>Instead of directly accessing <code>$_GET</code> and <code>$_POST</code> to retrieve the request parameters, it is recommended
  that you get them via the <code>request</code> component as shown above. This will make writing tests easier because
  you can create a mock request component with faked request data.</p>
</blockquote>
<p>When implementing <a href="guide-rest-quick-start.html">RESTful APIs</a>, you often need to retrieve parameters that are submitted
via PUT, PATCH or other <a href="#request-methods">request methods</a>. You can get these parameters by calling
the <a href="./yii-web-request.html#getBodyParam()-detail">yii\web\Request::getBodyParam()</a> methods. For example,</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$request</span> = Yii::<span class="hljs-variable">$app</span>-&gt;request;

<span class="hljs-comment">// returns all parameters</span>
<span class="hljs-variable">$params</span> = <span class="hljs-variable">$request</span>-&gt;bodyParams;

<span class="hljs-comment">// returns the parameter "id"</span>
<span class="hljs-variable">$param</span> = <span class="hljs-variable">$request</span>-&gt;getBodyParam(<span class="hljs-string">'id'</span>);
</code></pre>
<blockquote class="info"><p><strong>Info: </strong>Unlike <code>GET</code> parameters, parameters submitted via <code>POST</code>, <code>PUT</code>, <code>PATCH</code> etc. are sent in the request body.
  The <code>request</code> component will parse these parameters when you access them through the methods described above.
  You can customize the way how these parameters are parsed by configuring the <a href="./yii-web-request.html#$parsers-detail">yii\web\Request::$parsers</a> property.</p>
</blockquote>
<h2>Request Methods  <span id="request-methods"></span><a href="#request-methods" class="hashlink">&para;</a></h2><p>You can get the HTTP method used by the current request via the expression <code>Yii::$app-&gt;request-&gt;method</code>.
A whole set of boolean properties is also provided for you to check if the current method is of certain type.
For example,</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$request</span> = Yii::<span class="hljs-variable">$app</span>-&gt;request;

<span class="hljs-keyword">if</span> (<span class="hljs-variable">$request</span>-&gt;isAjax) { <span class="hljs-comment">/* the request is an AJAX request */</span> }
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$request</span>-&gt;isGet)  { <span class="hljs-comment">/* the request method is GET */</span> }
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$request</span>-&gt;isPost) { <span class="hljs-comment">/* the request method is POST */</span> }
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$request</span>-&gt;isPut)  { <span class="hljs-comment">/* the request method is PUT */</span> }
</code></pre>
<h2>Request URLs  <span id="request-urls"></span><a href="#request-urls" class="hashlink">&para;</a></h2><p>The <code>request</code> component provides many ways of inspecting the currently requested URL. </p>
<p>Assuming the URL being requested is <code>http://example.com/admin/index.php/product?id=100</code>, you can get various
parts of this URL as summarized in the following:</p>
<ul>
<li><a href="./yii-web-request.html#$url-detail">url</a>: returns <code>/admin/index.php/product?id=100</code>, which is the URL without the host info part. </li>
<li><a href="./yii-web-request.html#$absoluteUrl-detail">absoluteUrl</a>: returns <code>http://example.com/admin/index.php/product?id=100</code>,
which is the whole URL including the host info part.</li>
<li><a href="./yii-web-request.html#$hostInfo-detail">hostInfo</a>: returns <code>http://example.com</code>, which is the host info part of the URL.</li>
<li><a href="./yii-web-request.html#$pathInfo-detail">pathInfo</a>: returns <code>/product</code>, which is the part after the entry script and 
before the question mark (query string).</li>
<li><a href="./yii-web-request.html#$queryString-detail">queryString</a>: returns <code>id=100</code>, which is the part after the question mark. </li>
<li><a href="./yii-web-request.html#$baseUrl-detail">baseUrl</a>: returns <code>/admin</code>, which is the part after the host info and before
the entry script name.</li>
<li><a href="./yii-web-request.html#$scriptUrl-detail">scriptUrl</a>: returns <code>/admin/index.php</code>, which is the URL without path info and query string.</li>
<li><a href="./yii-web-request.html#$serverName-detail">serverName</a>: returns <code>example.com</code>, which is the host name in the URL.</li>
<li><a href="./yii-web-request.html#$serverPort-detail">serverPort</a>: returns 80, which is the port used by the Web server.</li>
</ul>
<h2>HTTP Headers  <span id="http-headers"></span><a href="#http-headers" class="hashlink">&para;</a></h2><p>You can get the HTTP header information through the <a href="./yii-web-headercollection.html">header collection</a> returned 
by the <a href="./yii-web-request.html#$headers-detail">yii\web\Request::$headers</a> property. For example,</p>
<pre><code class="hljs php language-php"><span class="hljs-comment">// $headers is an object of yii\web\HeaderCollection </span>
<span class="hljs-variable">$headers</span> = Yii::<span class="hljs-variable">$app</span>-&gt;request-&gt;headers;

<span class="hljs-comment">// returns the Accept header value</span>
<span class="hljs-variable">$accept</span> = <span class="hljs-variable">$headers</span>-&gt;get(<span class="hljs-string">'Accept'</span>);

<span class="hljs-keyword">if</span> (<span class="hljs-variable">$headers</span>-&gt;has(<span class="hljs-string">'User-Agent'</span>)) { <span class="hljs-comment">/* there is User-Agent header */</span> }
</code></pre>
<p>The <code>request</code> component also provides support for quickly accessing some commonly used headers, including:</p>
<ul>
<li><a href="./yii-web-request.html#$userAgent-detail">userAgent</a>: returns the value of the <code>User-Agent</code> header.</li>
<li><a href="./yii-web-request.html#$contentType-detail">contentType</a>: returns the value of the <code>Content-Type</code> header which indicates
the MIME type of the data in the request body.</li>
<li><a href="./yii-web-request.html#$acceptableContentTypes-detail">acceptableContentTypes</a>: returns the content MIME types acceptable by users.
The returned types are ordered by their quality score. Types with the highest scores will be returned first.</li>
<li><a href="./yii-web-request.html#$acceptableLanguages-detail">acceptableLanguages</a>: returns the languages acceptable by users.
The returned languages are ordered by their preference level. The first element represents the most preferred language.</li>
</ul>
<p>If your application supports multiple languages and you want to display pages in the language that is the most preferred
by the end user, you may use the language negotiation method <a href="./yii-web-request.html#getPreferredLanguage()-detail">yii\web\Request::getPreferredLanguage()</a>.
This method takes a list of languages supported by your application, compares them with <a href="./yii-web-request.html#$acceptableLanguages-detail">acceptableLanguages</a>,
and returns the most appropriate language.</p>
<blockquote class="tip"><p><strong>Tip: </strong>You may also use the <a href="./yii-filters-contentnegotiator.html">ContentNegotiator</a> filter to dynamically determine 
  what content type and language should be used in the response. The filter implements the content negotiation
  on top of the properties and methods described above.</p>
</blockquote>
<h2>Client Information  <span id="client-information"></span><a href="#client-information" class="hashlink">&para;</a></h2><p>You can get the host name and IP address
of the client machine through <a href="./yii-web-request.html#$userHost-detail">userHost</a>
and <a href="./yii-web-request.html#$userIP-detail">userIP</a>, respectively. For example,</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$userHost</span> = Yii::<span class="hljs-variable">$app</span>-&gt;request-&gt;userHost;
<span class="hljs-variable">$userIP</span> = Yii::<span class="hljs-variable">$app</span>-&gt;request-&gt;userIP;
</code></pre>
<h2>Trusted proxies and headers  <span id="trusted-proxies"></span><a href="#trusted-proxies" class="hashlink">&para;</a></h2><p>In the previous section you have seen how to get user information like host and IP address.
This will work out of the box in a normal setup where a single webserver is used to serve the website.
If your Yii application however runs behind a reverse proxy, you need to add additional configuration
to retrieve this information as the direct client is now the proxy and the user IP address is passed to
the Yii application by a header set by the proxy.</p>
<p>You should not blindly trust headers provided by proxies unless you explicitly trust the proxy.
Since 2.0.13 Yii supports configuring trusted proxies via the 
<a href="./yii-web-request.html#$trustedHosts-detail">trustedHosts</a>,
<a href="./yii-web-request.html#$secureHeaders-detail">secureHeaders</a>, 
<a href="./yii-web-request.html#$ipHeaders-detail">ipHeaders</a> and
<a href="./yii-web-request.html#$secureProtocolHeaders-detail">secureProtocolHeaders</a>
properties of the <code>request</code> component.</p>
<p>The following is a request config for an application that runs behind an array of reverse proxies,
which are located in the <code>10.0.2.0/24</code> IP network:</p>
<pre><code class="hljs php language-php"><span class="hljs-string">'request'</span> =&gt; [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-string">'trustedHosts'</span> =&gt; [
        <span class="hljs-string">'10.0.2.0/24'</span>,
    ],
],
</code></pre>
<p>The IP is sent by the proxy in the <code>X-Forwarded-For</code> header by default, and the protocol (<code>http</code> or <code>https</code>) is sent in <code>X-Forwarded-Proto</code>.</p>
<p>In case your proxies are using different headers you can use the request configuration to adjust these, e.g.:</p>
<pre><code class="hljs php language-php"><span class="hljs-string">'request'</span> =&gt; [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-string">'trustedHosts'</span> =&gt; [
        <span class="hljs-string">'10.0.2.0/24'</span> =&gt; [
            <span class="hljs-string">'X-ProxyUser-Ip'</span>,
            <span class="hljs-string">'Front-End-Https'</span>,
        ],
    ],
    <span class="hljs-string">'secureHeaders'</span> =&gt; [
        <span class="hljs-string">'X-Forwarded-For'</span>,
        <span class="hljs-string">'X-Forwarded-Host'</span>,
        <span class="hljs-string">'X-Forwarded-Proto'</span>,
        <span class="hljs-string">'X-Proxy-User-Ip'</span>,
        <span class="hljs-string">'Front-End-Https'</span>,
    ],
    <span class="hljs-string">'ipHeaders'</span> =&gt; [
        <span class="hljs-string">'X-Proxy-User-Ip'</span>,
    ],
    <span class="hljs-string">'secureProtocolHeaders'</span> =&gt; [
        <span class="hljs-string">'Front-End-Https'</span> =&gt; [<span class="hljs-string">'on'</span>]
    ],
],
</code></pre>
<p>With the above configuration, all headers listed in <code>secureHeaders</code> are filtered from the request,
except the <code>X-ProxyUser-Ip</code> and <code>Front-End-Https</code> headers in case the request is made by the proxy.
In that case the former is used to retrieve the user IP as configured in <code>ipHeaders</code> and the latter
will be used to determine the result of <a href="./yii-web-request.html#getIsSecureConnection()-detail">yii\web\Request::getIsSecureConnection()</a>.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Wed, 10 Apr 2019 23:20:40 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
